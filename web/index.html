<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>tmuxui</title>
  <link rel="stylesheet" href="style.css?v=8">
</head>
<body>

  <!-- ===== 画面1: セッション一覧 ===== -->
  <div id="view-sessions" class="view active">
    <header class="header">
      <h1 class="app-title">tmuxui</h1>
      <button id="btn-new-session" class="btn-icon" aria-label="新規セッション">＋</button>
      <span id="ws-dot" class="ws-dot"></span>
    </header>
    <main id="session-list" class="session-list"></main>
  </div>

  <!-- ===== 画面2: セッション詳細 ===== -->
  <div id="view-detail" class="view">
    <header class="header">
      <button id="btn-back" class="btn-back" aria-label="戻る">&#8592;</button>
      <span class="session-title">
        <span id="breadcrumb-session" class="breadcrumb-session"></span>
        <span id="breadcrumb-sep" class="breadcrumb-sep">›</span>
        <button id="breadcrumb-window" class="breadcrumb-window"></button>
      </span>
      <button id="btn-auto-approve" class="btn-toggle" aria-label="自動許可">AUTO</button>
      <button id="btn-refresh" class="btn-icon" aria-label="更新">&#8635;</button>
      <button id="btn-menu" class="btn-icon" aria-label="メニュー">&#9776;</button>
    </header>
    <!-- ===== 権限バナー（通知のみ） ===== -->
    <div id="permission-banner" hidden class="permission-banner">
      <span id="permission-prompt-text" class="banner-text">権限許可が必要です</span>
      <button id="btn-perm-dismiss" class="btn-perm-dismiss" aria-label="閉じる">&times;</button>
    </div>

    <nav id="pane-tabs" class="pane-tabs"></nav>

    <!-- ===== ペインドロワー ===== -->
    <div id="drawer-overlay" hidden class="drawer-overlay"></div>
    <nav id="drawer" class="drawer">
      <div class="drawer-header">Panes</div>
      <div id="drawer-pane-list" class="drawer-list"></div>
    </nav>
    <div id="pane-content" class="pane-content"></div>
    <div class="input-area">
      <form id="cmd-form" class="input-form" action="javascript:void(0)">
        <div class="cmd-input-wrap">
          <div id="cmd-suggest" hidden class="cmd-suggest"></div>
          <textarea id="cmd-input" class="cmd-input" rows="2" placeholder="コマンドを入力..."
                 autocomplete="off" autocorrect="off"
                 autocapitalize="off" spellcheck="false" enterkeyhint="enter"
                 aria-describedby="cmd-input-hint"></textarea>
        </div>
        <span id="cmd-input-hint" class="sr-only">送信ボタンで送信</span>
        <!-- action-bar: 1階層目のボタン構成は変更しない。追加キーは keys-sheet 内に配置すること -->
        <div class="action-bar">
          <button type="button" id="btn-up" class="btn-cursor" aria-label="上キー">&#8593;</button>
          <button type="button" id="btn-down" class="btn-cursor" aria-label="下キー">&#8595;</button>
          <button type="button" id="btn-enter" class="btn-cursor" aria-label="Enter">↵</button>
          <button type="button" id="btn-snippet" class="btn-cursor btn-snippet" aria-label="スニペット">S</button>
          <button type="button" id="btn-keys-more" class="btn-cursor btn-keys-more" aria-label="その他キー">…</button>
          <button type="submit" id="btn-send" class="btn-send">送信</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ===== 汎用モーダル ===== -->
  <div id="modal-overlay" hidden class="modal-overlay">
    <div class="modal-box">
      <div class="sheet-handle"></div>
      <p id="modal-message" class="modal-message"></p>
      <input id="modal-input" class="modal-input" hidden autocomplete="off">
      <input id="modal-input2" class="modal-input" hidden autocomplete="off" placeholder="ディレクトリ (任意)">
      <div class="modal-buttons">
        <button id="modal-cancel" class="modal-btn modal-btn-cancel">キャンセル</button>
        <button id="modal-ok" class="modal-btn modal-btn-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- ===== Window切替シート ===== -->
  <div id="window-sheet-overlay" hidden class="sheet-overlay">
    <div class="sheet">
      <div class="sheet-handle"></div>
      <div id="window-sheet-header" class="drawer-header"></div>
      <div id="window-sheet-list"></div>
    </div>
  </div>

  <!-- ===== Windowアクションメニュー ===== -->
  <div id="window-menu-overlay" hidden class="sheet-overlay">
    <div class="sheet action-sheet">
      <div class="sheet-handle"></div>
      <button id="window-menu-rename" class="action-sheet-item">名前変更</button>
      <button id="window-menu-add" class="action-sheet-item">新規Window</button>
      <button id="window-menu-close" class="action-sheet-item action-sheet-danger">Windowを閉じる</button>
      <button id="window-menu-cancel" class="action-sheet-item action-sheet-cancel">キャンセル</button>
    </div>
  </div>

  <!-- ===== キーシート ===== -->
  <div id="keys-sheet-overlay" hidden class="sheet-overlay">
    <div class="sheet">
      <div class="sheet-handle"></div>
      <!-- カテゴリ一覧 -->
      <div id="sheet-categories" class="sheet-grid">
        <button type="button" class="sheet-key" data-keys="Escape">
          <span class="sheet-key-icon">⎋</span>
          <span class="sheet-key-label">Esc</span>
        </button>
        <button type="button" class="sheet-category" data-submenu="ctrl">
          <span class="sheet-key-icon">⌃</span>
          <span class="sheet-key-label">Ctrl</span>
        </button>
        <button type="button" class="sheet-key" data-keys="BTab">
          <span class="sheet-key-icon">⇤</span>
          <span class="sheet-key-label">Shift+Tab</span>
        </button>
        <button type="button" class="sheet-category" data-submenu="commands">
          <span class="sheet-key-icon">/</span>
          <span class="sheet-key-label">コマンド</span>
        </button>
      </div>
      <!-- Ctrl サブメニュー -->
      <div id="sheet-ctrl" hidden class="sheet-sub">
        <button type="button" class="sheet-back">← Ctrl</button>
        <div class="sheet-grid">
          <button type="button" class="sheet-key" data-keys="C-c">
            <span class="sheet-key-icon">C</span>
            <span class="sheet-key-label">中断</span>
          </button>
          <button type="button" class="sheet-key" data-keys="C-d">
            <span class="sheet-key-icon">D</span>
            <span class="sheet-key-label">EOF</span>
          </button>
          <button type="button" class="sheet-key" data-keys="C-o">
            <span class="sheet-key-icon">O</span>
            <span class="sheet-key-label">挿入</span>
          </button>
        </div>
      </div>
      <!-- コマンドサブメニュー -->
      <div id="sheet-commands" hidden class="sheet-sub">
        <button type="button" class="sheet-back">← コマンド</button>
        <div class="sheet-cmd-list"></div>
      </div>
    </div>
  </div>

  <!-- ===== スニペット管理シート ===== -->
  <div id="snippet-sheet-overlay" hidden class="sheet-overlay">
    <div class="sheet snippet-sheet">
      <div class="sheet-handle"></div>
      <!-- 一覧ビュー -->
      <div id="snippet-sheet-list">
        <button type="button" id="btn-snippet-create" class="snippet-create-btn">＋ 新規作成</button>
        <div id="snippet-sheet-items" class="snippet-sheet-items"></div>
      </div>
      <!-- 編集ビュー -->
      <div id="snippet-sheet-edit" hidden class="sheet-sub">
        <button type="button" id="snippet-edit-back" class="sheet-back">← スニペット編集</button>
        <input id="snippet-edit-name" class="modal-input" placeholder="ファイル名">
        <textarea id="snippet-edit-content" class="snippet-edit-textarea" rows="8" placeholder="内容を入力..."></textarea>
        <div class="modal-buttons">
          <button type="button" id="snippet-edit-cancel" class="modal-btn modal-btn-cancel">キャンセル</button>
          <button type="button" id="snippet-edit-save" class="modal-btn modal-btn-ok">保存</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== カードアクションメニュー ===== -->
  <div id="card-menu-overlay" hidden class="sheet-overlay">
    <div class="sheet action-sheet">
      <div class="sheet-handle"></div>
      <button id="card-menu-rename" class="action-sheet-item">名前変更</button>
      <button id="card-menu-delete" class="action-sheet-item action-sheet-danger">セッションを終了</button>
      <button id="card-menu-cancel" class="action-sheet-item action-sheet-cancel">キャンセル</button>
    </div>
  </div>

  <!-- ===== スニペットクイック挿入メニュー ===== -->
  <div id="snippet-menu-overlay" hidden class="sheet-overlay">
    <div class="sheet action-sheet">
      <div class="sheet-handle"></div>
      <div id="snippet-menu" class="snippet-menu-sheet"></div>
    </div>
  </div>

  <!-- ===== スニペット項目メニュー ===== -->
  <div id="snippet-item-menu-overlay" hidden class="sheet-overlay" style="z-index:250">
    <div class="sheet action-sheet">
      <div class="sheet-handle"></div>
      <button id="snippet-item-edit" class="action-sheet-item">編集</button>
      <button id="snippet-item-delete" class="action-sheet-item action-sheet-danger">削除</button>
      <button id="snippet-item-cancel" class="action-sheet-item action-sheet-cancel">キャンセル</button>
    </div>
  </div>

  <script src="app.js?v=8"></script>
  <script src="ws.js?v=8"></script>
  <script src="ansi.js?v=8"></script>
  <script src="views.js?v=8"></script>
  <script src="snippet.js?v=8"></script>
  <script src="input.js?v=8"></script>
</body>
</html>
